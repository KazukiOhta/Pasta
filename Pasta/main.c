

//Dynamic Programming


#include <stdio.h>


int N;
int i;//行数
int K;
int DATA[100][2];

int DP[200][3][3];

int a;
int b;

int ans;


int main() {
    
    scanf("%d",&N);
    scanf("%d",&K);
    
    for (i = 0; i < K; i ++) {
        scanf("%d",&DATA[i][0]);
        scanf("%d",&DATA[i][1]);
    }
    
    DP[0][0][0] = 0;
    DP[0][0][1] = 1;
    DP[0][0][2] = 0;
    DP[0][1][0] = 0;
    DP[0][1][1] = 0;
    DP[0][1][2] = 1;
    DP[0][2][0] = 1;
    DP[0][2][1] = 0;
    DP[0][2][2] = 0;
    
    for (b = 0; b < K; b ++) {
        if (DATA[b][0] == 1) {
            if (DATA[b][1] != 1) {
                DP[0][0][0] = 0;
                DP[0][1][0] = 0;
                DP[0][2][0] = 0;
            }
            if (DATA[b][1] != 2) {
                DP[0][0][1] = 0;
                DP[0][1][1] = 0;
                DP[0][2][1] = 0;
            }
            if (DATA[b][1] != 3) {
                DP[0][0][2] = 0;
                DP[0][1][2] = 0;
                DP[0][2][2] = 0;
            }
        }
    }
    
    /*printf("\n\n\n%d日目\n",a+1);
    printf("%d %d %d\n%d %d %d\n%d %d %d\n",
           DP[a][0][0],
           DP[a][0][1],
           DP[a][0][2],
           DP[a][1][0],
           DP[a][1][1],
           DP[a][1][2],
           DP[a][2][0],
           DP[a][2][1],
           DP[a][2][2]
           
           );*/
    
    
    
    for (a = 1; a < N; a ++) {
        DP[a][0][0] = /*DP[a-1][0][0]*/+DP[a-1][1][0]+DP[a-1][2][0];
        DP[a][0][1] = DP[a-1][0][0]+DP[a-1][1][0]+DP[a-1][2][0];
        DP[a][0][2] = DP[a-1][0][0]+DP[a-1][1][0]+DP[a-1][2][0];
        DP[a][1][0] = DP[a-1][0][1]+DP[a-1][1][1]+DP[a-1][2][1];
        DP[a][1][1] = DP[a-1][0][1]/*+DP[a-1][1][1]*/+DP[a-1][2][1];
        DP[a][1][2] = DP[a-1][0][1]+DP[a-1][1][1]+DP[a-1][2][1];
        DP[a][2][0] = DP[a-1][0][2]+DP[a-1][1][2]+DP[a-1][2][2];
        DP[a][2][1] = DP[a-1][0][2]+DP[a-1][1][2]+DP[a-1][2][2];
        DP[a][2][2] = DP[a-1][0][2]+DP[a-1][1][2]/*DP+[a-1][2][2]*/;
        
        for (b = 0; b < K; b ++) {
            if (DATA[b][0] == a+1) {
                if (DATA[b][1] != 1) {
                    DP[a][0][0] = 0;
                    DP[a][1][0] = 0;
                    DP[a][2][0] = 0;
                }
                if (DATA[b][1] != 2) {
                    DP[a][0][1] = 0;
                    DP[a][1][1] = 0;
                    DP[a][2][1] = 0;
                }
                if (DATA[b][1] != 3) {
                    DP[a][0][2] = 0;
                    DP[a][1][2] = 0;
                    DP[a][2][2] = 0;
                }
            }
        }
        
        
        
        /*printf("\n\n\n%d日目\n",a+1);
        printf("%d %d %d\n%d %d %d\n%d %d %d\n",
               DP[a][0][0],
               DP[a][0][1],
               DP[a][0][2],
               DP[a][1][0],
               DP[a][1][1],
               DP[a][1][2],
               DP[a][2][0],
               DP[a][2][1],
               DP[a][2][2]
               
               );*/
        
        DP[a][0][0] = DP[a][0][0] % 10000;
        DP[a][0][1] = DP[a][0][1] % 10000;
        DP[a][0][2] = DP[a][0][2] % 10000;
        DP[a][1][0] = DP[a][1][0] % 10000;
        DP[a][1][1] = DP[a][1][1] % 10000;
        DP[a][1][2] = DP[a][1][2] % 10000;
        DP[a][2][0] = DP[a][2][0] % 10000;
        DP[a][2][1] = DP[a][2][1] % 10000;
        DP[a][2][2] = DP[a][2][2] % 10000;
        
        
    }
    
    ans =
      DP[N-1][0][0]
    + DP[N-1][0][1]
    + DP[N-1][0][2]
    + DP[N-1][1][0]
    + DP[N-1][1][1]
    + DP[N-1][1][2]
    + DP[N-1][2][0]
    + DP[N-1][2][1]
    + DP[N-1][2][2];

    printf("\n%d",ans%10000);
    
    return 0;
}
